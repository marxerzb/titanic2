---
title: "R Notebook"
output: html_notebook
---

A Titanic katasztrófa túlélésének predikciója

```{r}
gender_submission <- read.csv("gender_submission.csv")
View(gender_submission)
train <- read_csv("~/TSM2/titanic/train.csv", 
     col_types = cols(
         Sex = col_factor(levels = c("male", "female")),
         Age = col_double(), 
         Embarked = col_factor(levels = c("C", "S", "Q")), 
         Parch = col_integer(), 
         Pclass = col_factor(levels = c("3", "2", "1"), ordered = TRUE), 
         SibSp = col_integer(), 
         Survived = col_integer()))
test <- read_csv("~/TSM2/titanic/test.csv", 
     col_types = cols(
         Sex = col_factor(levels = c("male", "female")),
         Age = col_double(), 
         Embarked = col_factor(levels = c("C", "S", "Q")), 
         Parch = col_integer(), 
         Pclass = col_factor(levels = c("3", "2", "1"), ordered = TRUE), 
         SibSp = col_integer(), 
         Survived = col_integer()))
View(test)
```


```{r}
str(train)
```


```{r}
library(xgboost)
library(caret)

newdata <- dummyVars("~ Pclass + Sex + Embarked", data = train)
train_data <- data.frame(predict(newdata, newdata = train))
train_data$Age <- train$Age
train_data$SibSp <- train$SibSp
train_data$Parch <- train$Parch
train_data$Fare <- train$Fare
View(train_data)

train_dmatrix <- xgb.DMatrix(label = train$Survived, data = as.matrix(train_data))

newtest <- dummyVars("~ Pclass + Sex + Embarked", data = test)
test_data <- data.frame(predict(newtest, newdata = test))
test_data$Age <- test$Age
test_data$SibSp <- test$SibSp
test_data$Parch <- test$Parch
test_data$Fare <- test$Fare
View(test_data)

test_dmatrix <- xgb.DMatrix(label = test$Survived, data = as.matrix(test_data))



xgbmodel <- xgboost(data = train_dmatrix, max.depth = 2, eta = 1, nthread = 2, nrounds = 10, objective = "binary:logistic")
print("Anyádat")
```





